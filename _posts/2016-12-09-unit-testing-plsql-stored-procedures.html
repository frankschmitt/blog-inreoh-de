---
layout: post
title: Unit testing PL/SQL stored procedures with JRuby (Part I)
date: '2016-12-09T08:35:00.002-08:00'
author: Frank Schmitt
tags: 
modified_time: '2016-12-09T08:36:53.324-08:00'
blogger_id: tag:blogger.com,1999:blog-6373343020354235841.post-2186337394828888318
blogger_orig_url: http://inreoh.blogspot.com/2016/12/unit-testing-plsql-stored-procedures.html
---

<h2>Synopsis</h2>My PL/SQL code that's running on Oracle doesn't have proper unit tests so far. The main reasons for this are<br />- lack of tooling (neither utplsql nor QuestCodeTester nor the SQL Developer built-in has satisfied me so far)<br />- lack of time (lame excuse, I know)<br /><br />So I decided to once more tackle the problem.<br /><br /><h2>Past experiences</h2>Until now, I've tried the following approaches:<br /><br /><h3>utPLSQL</h3><h4>Pro</h4>- runs directly in the database =&gt; no additional setup necessary<br />- syntax errors in the unit tests / procedure calls are caught by the compiler<br />- same language for Code Under Test and unit tests<br /><h4>Con</h4>- PL/SQL is quite limited in its expressiveness<br />- Integration in a CI environment for automatic builds / reporting build failures requires additional work <br /><h3>MRI Ruby with oci8 and Cucumber Spec files</h3><h4>Pro</h4>- Ruby (it's such a wonderful language, really)<br />- Gherkin syntax for spec files<br /><h4>Con</h4>- complicated deployment in CI environment (requires at least an Oracle instant client installation)<br />- even more complicated to set up on Windows (requires Devkit to compile the native extension oci8)<br /><h3>.NET with SpecFlow </h3><h4>Pro</h4>- excellent IDE (Visual Studio)<br />- Gherkin syntax for spec files<br /><h4>Con</h4>- Windows only (although Mono might be viable, but setting this up with ODP.NET / Oracle client seems quite complicated)<br />- C# is quite verbose (F# might be an alternative, though)<br /><h3>Java with Maven, JUnit / Cucumber-JVM </h3><h4>Pro</h4>- real cross-platform<br />- easy deployment (no need for the Oracle client - just include ojdbc7.jar)<br />- Gherkin syntax for spec files<br /><h4>Con</h4>- Java is incredibly verbose (Scala / Kotlin might be an alternative, though)<br />- Maven (enough said)<br /><br /><h2>A new horizon</h2><h4>Requirements </h4>My new solution should be:<br />- easy to deploy (no full-blown Oracle client necessary)<br />- really cross-platform (Windows, Linux, Mac OS X; Docker integration not strictly necessary, but would be very nice)<br />&nbsp;- joyful (this excludes Java as a language, Maven as a build tool, and several others)<br /><br /><h4>Choice</h4>For now, I'll go with:<br />- JRuby (Ruby + JVM = dream team)<br />- Gradle (although I might switch to Rake)<br />- RSpec (although I might switch to Cucumber if I want a more high-level solution)<br /><br />